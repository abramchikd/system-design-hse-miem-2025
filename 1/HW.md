# Домашка

1. Нажать “Do one!” на этом сайте: [architecturalkatas.com](https://www.architecturalkatas.com/)
2. Ознакомиться с вводными
3. Целиком пройти этап **«Сбор и анализ требований»**:
    - Отсев
    - Scope Refinement
    - Функциональные требования
    - Нефункциональные требования
    - Ограничения
    - Расчет нагрузки:
        * Трафик
        * БД
4. Сформировать отчет по правилам ниже

*Доп. вводные:*  
Вы находитесь в России, 2025 год.

---

## Формат сдачи
1. Форкнуть репу к себе
2. Сделать собственную ветку
3. ДЗ оформить в `.md` файл и запушить
4. Сделать мердж-реквест в `master` и поставить меня в **Reviewer** (@nikolaysavelev)

**Дедлайн:** 2 недели (26.04)

----

A home electronics giant wants to build a system for home automation: turning lights on and off, locking and unlocking doors, remote camera observation, and so on.

Users: each system will be sold to consumers (small families), but the company expects to sell thousands of these units in the first three years.

Requirements: the system must be as turnkey as possible, but be sold in modular units (camera, lock, thermostat, etc) for easy purchase. The units must be accessible over the Internet (for remote monitoring and access), and it is assumed the user will have an existing WiFi setup (router and connection) to tap into. Customers must be able to program the system to control the various modules according to their own needs.

Other details: the electrical engineering for the units will be taken care of by other groups, and the software protocols for controlling the modules is flexible, according to the needs/designs of your architecture. (They will handle implementing the module side of the protocol, once you have specified it to them.)

# Отсев

**Что будет, если не сделать систему?**
Компания полностью проиграет конкурецию таким гигантам как Яндекс, Xiaomi и т.д. Вплоть до разорения

**Как будем мерить успех?**
Количество покупок доп. умных девайсов после покупки первого умного дейвса компании (ожидается 60%).

**Задел**
- Максимум 6 человек в команде
- Облачная инфраструктура компании (используется для интернет-магазина и менедждемента предприятий), на которой можно будет развернуть сервер новой системы
- Бюджет достаточен для работы этой части проекта (оплата разработчиков + облако имеет запас по ресурсам, который можно бесплатно занять)
- Отсутствует аналитика решений конкурентов. Нужны дополнительные временные затраты. Пользовательскую часть решений конкурентов легко изучить

# Scope Refinement
**Пользователи:**
Только покупатели. Добавление новых устройств и автоматизаций осуществляется через код

**Основные функции:**
Web-приложение и мобильные приложения идентичны по функционалу. Обязательный вход (аккаунт тот же, что и в интернет магазине). 

Приложение позволяет привязать к аккаунту умное устройство (кнопка -> выбор устройства из списка -> простая инструкция). После привязки устройства возможность перейти на его страницу с тремя разделами: статусы устройства (горит/не горит, цвет света, тепмпература, влажность и т.д. - зависит от типа устройства); управление устройством (вкл / выкл и т.д.), если устройство подразумевает управление; настройки (выбор имени, режима работы и т.д.).

Созданием семеный групп, добавление в них пользователей и устройств для совсетного управления одим устроством несколькими пользователями.

Создание автоматизаций: условие по времени / состоянию устройства (в т.ч. сложные условия через и/или) => действия на одном или нескольких устройствах / отправка уведомления в мобильное приложения. Лог сработавших автоматизаций, доступных пользователю.

Критические устройтва могут взаимодействовать напрямую. Например, датчик протечки и умный кран в водопроводном шкафу

**Возможный функционал:**
Интеграция с хабами умного дома, например Яндекс Алисой.

# Функциональные требования
**Use-Cases**
- Клиент добавляет устройство -> несколько раз в день заходит в приложение и изменяет состояние устройства
- Клиент добавляет устройство -> добавляет в семейную группу -> несколько раз в день заходят в приложение и изменяет состояние устройства
- Клиент настраивает незначительную автоматизацию -> радуется
- Клиент настраивает критическую автоматизацию (реагирование на протечку, задымлении, открытии двери) -> у устройства пропадает связь с инернетов -> автоматизация продолжает работать

# Нефункциональные требования
- Время отклика:
    - Сценарии автоматизации, управляемые централизованно, работают не более чем с секундной задержкой
    - Изначальная загрузка сайта < 1.5 сек
    - Изначальная загрузка приложения < 5 сек
    - Время отклика на запросы < 2 сек
    - Время обновления статуса устройства на открытой странице < 5 сек

2. Масштабируемость
- Автоматическое добавление подов при нагрузке > 80% CPU или RAM
- Распределённость серверов автоматизации по гео

3. Отказоустойчивость
- SLA: 99.9% uptime веба
- 99.99% updime автоматизаций
- База с репликацией
- Полностью ready копия для каждого сервера автоматизаций на случай отказа

4. Безопасность
- Базовая обеспечивается облаком
- Устройство нельзя привзяать к двум аккаунтам одновременно
- Никто (в т.ч. сотрудники компании), кроме пользователя, который привязал устройство, не имеет доступ к его статусу (особенно к IP-камерам ;))

5. Мониторинг
Graphana + ELK + Алёрты

# Ограничения
1. Бизнес-модель: B2C
2. Основные бизнес-метрики и масштабирование: Retention (60% купят второй девайс); roi (окупится за 3 года)
3. География пользователей: Россия
4. Специфика домена: IoT
5. Тип устройств: мобилка, браузер
6. Этап развития: MVP (приложение 6 месяцев) / Full-Scale Product (2 года - инетграция с самими девайсами долгая)
7. Тип развертывания: Cloud (от компании)
8. Сами технологии: сервис авторизации компании + облако
9. Бюджет на железо +- 0
10. Интеграции: Алиса и другие хабы в будущем
